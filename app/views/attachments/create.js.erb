var clipsContainer = $("#list-<%= @attachment.attachmentable_type.downcase %>_<%= @attachment.attachmentable_id || 'new' %>");
var idContainer =  $("#attachment_ids-<%= @attachment.attachmentable_type.downcase %>_<%= @attachment.attachmentable_id || 'new' %>");

// Вынести эти строки в helper
clipsContainer.append("<%= j attachment_links_edit @attachment %>");

if ( idContainer.val() == "" ) {
    var arr = [];
}
else {
    var arr = idContainer.val().split(',');
}
// TODO Переделать массивы простым добавлением к строке +
arr.push('<%= @attachment.id %>');
arr.join(',');
idContainer.val(arr);